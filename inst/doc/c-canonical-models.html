<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Canonical causal models</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Canonical causal models</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(CausalQueries)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(estimatr)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">options</span>(<span class="at">mc.cores =</span> <span class="dv">2</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span></code></pre></div>
<p>Here we show properties of some canonical causal models, exploring in
particular estimates of non-identified queries. The examples include
cases where inferences are reliable but also where identification
failures result in unreliable posteriors.</p>
<div id="simple-experiment" class="section level2">
<h2>Simple experiment</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;X -&gt; Y&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,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" alt="Simple experiment" width="50%" />
<p class="caption">
Simple experiment
</p>
</div>
<p>This model could be justified by a randomized control trial. With a
lot of data you can get tight estimates for the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> but not for whether a given outcome on
<span class="math inline">\(Y\)</span> is due to <span class="math inline">\(X\)</span>. That is the “effects of causes”
estimand is identified, but the “causes of effects” estimand is not.</p>
<p>In the illustration below we generate data from a parameterized model
and then try to recover the average treatment effect (ATE) and the
“probability of causation” (POC) for <code>X=1, Y=1</code> cases. The
ATE has a tight credibility interval. The PoC does not, although it is
still considerably tighter than the prior.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="fu">c</span>(<span class="st">&quot;10&quot;</span>, <span class="st">&quot;01&quot;</span>), <span class="at">parameters =</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">6</span>))</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>data <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">make_data</span>(<span class="at">n =</span> <span class="dv">5000</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>  <span class="fu">query_model</span>(<span class="at">queries =</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>                <span class="fu">list</span>(<span class="at">ATE =</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>                     <span class="at">POC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>),</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>              <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;priors&quot;</span>, <span class="st">&quot;posteriors&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Simple experiment query" />
<div class="figcaption">Simple experiment query</div>
</div>
</div>
<div id="confounded" class="section level2">
<h2>Confounded</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;X -&gt; Y; X &lt;-&gt; Y&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">x_coord =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">y_coord =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,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" alt="Confounded model" width="75%" />
<p class="caption">
Confounded model
</p>
</div>
<p>This is the appropriate model if <span class="math inline">\(X\)</span> is not randomized and it is possible
that unknown factors affect both the assignment of <span class="math inline">\(X\)</span> and the outcome <span class="math inline">\(Y\)</span>.</p>
<p>In the illustration below we use data, drawn from a model in which
<em>X</em> is <em>in fact</em> as if randomized (though we do not know
this) and there is a true positive treatment effect. We see we have lost
identification on the ATE but also our uncertainty about POC is much
greater.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="st">&quot;01&quot;</span>, <span class="at">parameters =</span> .<span class="dv">7</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>data <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="fu">make_data</span>(<span class="at">n =</span> <span class="dv">5000</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="fu">query_model</span>(<span class="at">queries =</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>                <span class="fu">list</span>(<span class="at">ATE =</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>                     <span class="at">POC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>),</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>              <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;priors&quot;</span>, <span class="st">&quot;posteriors&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Confounded model query" />
<div class="figcaption">Confounded model query</div>
</div>
</div>
<div id="chain-model" class="section level2">
<h2>Chain model</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAV1BMVEUAAAAAADoAAGYAOpAAZrY6AAA6ADo6kNtmAABmADpmtttmtv+QOgCQ27aQ29uQ2/+2ZgC2tra225C2/7a2///bkDrb25Db/7bb/9v/tmb/25D//7b///+2LGXvAAAACXBIWXMAAAsSAAALEgHS3X78AAAHeUlEQVR4nO3b227aQBiF0SFASQsN9EBap/P+z1nhKMblcMsvde19E+VuVj6lbuSh9Yxcqz5AVrOER5fw6BIeXcKjS3h0CY8u4dElPLqER5fw6BIeXcKjS3h0CY8u4dElPDo3fBtXfYqyofI2W/VZamayW+PLk+rWUl5EX3Yny4Pm6+5ieY98qztYnhPf7u6V98AJP84DJ/w4DTyFXo3fDmx5zjvf8vcu4ZHNuz/9PLj/1nPe8xb7I/yQ57znbYeW8MzOoTdv64SHNv2v/s+z3J0Nv9iP3w0Jr6zdWfW5Hj0OnJc07/PEeS07DiTnIsZpojlXrzoaPpct1fC5Xq2G7/lARfUBspolPLqER5fw6BIeXcKjS3h0CY8u4dHR4WW8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxsp3Gy3YaL9tpvGyn8bKdxst2Gi/babxsp/GyncbLdhov22m8bKfxqL3NVn2WmqHsrndPePYHUH2AquHdE776HFVj4d3uDofvCY+O7i6H7wmPTu5Oh6fxsp1ewqNLeHQJjy7h0SU8uoRHl/DoEh6dGz6vZcXlsqXJbo0vT6pbS3kRfdmdLA+ar7uL5T3yre5geU58u7tX3gMn/DgPnPDjNPAUevO2bm07sOU577Ttsa0G91ee8057+vH563PCK5uVXvUD/JDnvOdtvg0Jz+wcevn6aX9IeGYfnRcvu7b89ax2Z8Mv9sePv+kSnli7s+pzPXocOC9p3ueJ81p2HEjORYzTRHOuXnU0fC5bquFzvVoN3/OBiuoDZDVLeHQJjy7h0SU8uoRHl/DoEh5dwqOjw8t42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jZTuNl+00XrbTeNlO42U7jZftNF6203jZTuNlO42X7TRettN42U7jUXubrfosNUPZXe+e8OwPoPoAVcO7J3z1OarGwrvdHQ7fEx4d3V0O3xMendydDk/jZTu9hEeX8OgSHl3Co0t4dAmPLuHRJTw6N3xey4rLZUuT3RpfnlS3lvIi+rI7WR40X3cXy3vkW93B8pz4dnevvAdO+HEeOOHHaeCPzov94fRle1TLc96p/MuutdXA/spz3mnL1/XT93XCI5s91TfHLzv3Ic95Z5s94BP+f98/4Q8J7+xe+OpzPXoeOOHHeeA7qz7Xo8eB85LmfZ44r2XHgeRcxDhNNOfqVUfD57KlGj7Xq9XwPR+oqD5AVrOER5fw6BIeXcKjS3h0CY8u4dElPLqER/cXBb+1IpkLo54AAAAASUVORK5CYII=" alt="Chain model" width="75%" />
<p class="caption">
Chain model
</p>
</div>
<p>This is a chain model. This model is hard to justify from
experimentation since randomization of <span class="math inline">\(Z\)</span> does not guarantee that third features
do not influence both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, or that <span class="math inline">\(Z\)</span> operates on <span class="math inline">\(Y\)</span> only though <span class="math inline">\(X\)</span>.</p>
<p>Even still, it is a good model to illustrate limits of learning about
effects by observation of the values of mediators.</p>
<p>Below we imagine that data is produced by a model in which <span class="math inline">\(Z\)</span> has a 0.8 average effect on <span class="math inline">\(X\)</span> and <span class="math inline">\(X\)</span> has a 0.8 average effect on <span class="math inline">\(Y\)</span>. We see that positive evidence on the
causal chain (on <span class="math inline">\(X\)</span>) has a modest
effect on our belief that <span class="math inline">\(Z=1\)</span>
caused <span class="math inline">\(Y=1\)</span>. Negative evidence has a
much stronger effect, albeit with considerable posterior
uncertainty.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_names =</span> <span class="fu">c</span>(<span class="st">&quot;X.10&quot;</span>, <span class="st">&quot;X.01&quot;</span>, <span class="st">&quot;Y.10&quot;</span>, <span class="st">&quot;Y.01&quot;</span>),</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                 <span class="at">parameters =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, .<span class="dv">85</span>, .<span class="dv">05</span>, .<span class="dv">85</span>))</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>data <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="fu">make_data</span>(<span class="at">n =</span> <span class="dv">5000</span>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  <span class="fu">query_model</span>(<span class="at">query =</span> <span class="fu">list</span>(<span class="st">&quot;Y[Z=1] - Y[Z=0]&quot;</span>),</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>              <span class="at">given =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Z==1 &amp; Y==1&quot;</span>, <span class="st">&quot;Z==1 &amp; Y==1 &amp; X==0&quot;</span>, <span class="st">&quot;Z==1 &amp; Y==1 &amp; X==1&quot;</span>),</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>              <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;posteriors&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Chain model query" />
<div class="figcaption">Chain model query</div>
</div>
</div>
<div id="iv-model-with-exclusion-restriction" class="section level2">
<h2>IV model with exclusion restriction</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Model with exclusion restriction and monotonicity</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y; X &lt;-&gt; Y&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">set_restrictions</span>(<span class="fu">decreasing</span>(<span class="st">&#39;Z&#39;</span>, <span class="st">&#39;X&#39;</span>))  <span class="co"># monotonicity restriction</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># Adding parameters for data generation</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_names =</span> <span class="fu">c</span>(<span class="st">&quot;Y.10_X.01&quot;</span>, <span class="st">&quot;Y.01_X.01&quot;</span>),</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>                 <span class="at">parameters =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">75</span>))     <span class="co"># complier effect</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">x_coord =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">y_coord =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,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" alt="IV model with exclusion restriction satisfied" width="75%" />
<p class="caption">
IV model with exclusion restriction satisfied
</p>
</div>
<p>This is the classic “instrumental variables” model. This model is
sometimes justified by randomization of <span class="math inline">\(Z\)</span> under the assumption that <span class="math inline">\(Z\)</span> operates on <span class="math inline">\(Y\)</span> only though <span class="math inline">\(X\)</span> (the exclusion restriction).
Researchers also often assume that <span class="math inline">\(Z\)</span> has a monotonic effect on <span class="math inline">\(X\)</span>, which we have also imposed here.</p>
<p>Below we draw data from this model, update, and query, focusing our
attention on the effects of <span class="math inline">\(X\)</span> on
<span class="math inline">\(Y\)</span> for the population and also
specifically for units for whom <span class="math inline">\(X\)</span>
responds positively to <span class="math inline">\(Y\)</span>,
compliers. In addition we ask about the probability of causation, both
for units with <span class="math inline">\(X=1, Y=1\)</span> (PoC) and
for compliers with <span class="math inline">\(X=1, Y=1\)</span> (PoCC).
In the model that generated these data an effect is present for
compliers only, though researchers do not know (or assume) this.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">make_data</span>(model, <span class="dv">4000</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="at">query =</span> <span class="fu">list</span>(</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>      <span class="at">ATE =</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>      <span class="at">LATE=</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X[Z=1] &gt; X[Z=0]&quot;</span>, <span class="co"># ATE for compliers</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>      <span class="at">PoC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>,    <span class="co"># ATE for units with X=Y-1</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>      <span class="at">PoCC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1 &amp; (X[Z=1] &gt; X[Z=0])&quot;</span>),    <span class="co"># ATE for units with X=Y-1</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;posteriors&quot;</span>, <span class="st">&quot;parameters&quot;</span>),</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>    <span class="at">cred =</span> <span class="dv">99</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="IV inferences I" />
<div class="figcaption">IV inferences I</div>
</div>
<p>Note the relatively tight posterior for the complier average effect
(LATE) and the wide posterior for the average effect and for the
probability of causation.</p>
</div>
<div id="iv-model-without-exclusion-restriction" class="section level2">
<h2>IV model without exclusion restriction</h2>
<p>Here is a model in which neither the exclusion restriction or
monotonicity holds.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y &lt;- Z; X &lt;-&gt; Y&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">x_coord =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">y_coord =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,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" alt="Exclusion restriction not satisfied" width="75%" />
<p class="caption">
Exclusion restriction not satisfied
</p>
</div>
<p>Note that for comparability we assume again that the data is the same
as before, generated by a model in which the exclusion restriction in
fact holds (though researchers do not know this).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="at">query =</span> <span class="fu">list</span>(</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>      <span class="at">ATE =</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>      <span class="at">LATE=</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X[Z=1] &gt; X[Z=0]&quot;</span>, <span class="co"># ATE for compliers</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>      <span class="at">PoC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>,    <span class="co"># ATE for units with X=Y-1</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>      <span class="at">PoCC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1 &amp; (X[Z=1] &gt; X[Z=0])&quot;</span>), <span class="co"># ATE for compliers with X=Y-1</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;posteriors&quot;</span>),</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>    <span class="at">cred =</span> <span class="dv">99</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="IV inferences II" />
<div class="figcaption">IV inferences II</div>
</div>
<p>We updated here using a relatively large number of iterations to
ensure stable estimates. Note the failure of the two key assumptions are
reflected by larger credibility intervals and underestimates for all
quantities.</p>
</div>
<div id="mediation-model-with-sequential-ignorability" class="section level2">
<h2>Mediation model with sequential ignorability</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y &lt;- Z&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">x_coord =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">y_coord =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<div class="figure">
<img src="data:image/png;base64,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" alt="Mediation model with sequential ignorability satisfied" width="75%" />
<p class="caption">
Mediation model with sequential ignorability satisfied
</p>
</div>
<p>This is a typical mediation type problem where you might want to
understand the effects of <span class="math inline">\(Z\)</span> on
<span class="math inline">\(Y\)</span> that operate directly or that
operate via <span class="math inline">\(X\)</span>.</p>
<p>We have assumed here that there are no third features that cause both
<span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. This is a strong assumption that is a
key part of “sequential ignorability” (see Forastiere et al (2018) for
an extensive treatment of the relationship between sequential
ignorability and “strong principal ignorability” which we impose
here).</p>
<p>Here one might ask queries about different types of direct or
indirect effect of <span class="math inline">\(Z\)</span> on <span class="math inline">\(Y\)</span> as well as the average effects of <span class="math inline">\(Z\)</span> on <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> and of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>.</p>
<p>In this example the data is drawn from a world in which the most
common type has <span class="math inline">\(Y=1\)</span> if and only if
both <span class="math inline">\(Z=1\)</span> and <span class="math inline">\(X=1\)</span> but in which <span class="math inline">\(Z\)</span> exerts a negative effect on <span class="math inline">\(X\)</span>; there are both positive direct effects
and negative indirect effects.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>model <span class="ot">&lt;-</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y &lt;- Z&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="fu">c</span>(<span class="st">&quot;00&quot;</span>, <span class="st">&quot;10&quot;</span>), <span class="at">parameters =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="st">&quot;0001&quot;</span>, <span class="at">parameters =</span> .<span class="dv">5</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>data <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span> <span class="fu">make_data</span>(<span class="at">n =</span> <span class="dv">2000</span>)</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>queries <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>  <span class="st">`</span><span class="at">ATE Z -&gt; X</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;X[Z=1] - X[Z=0]&quot;</span>,</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>  <span class="st">`</span><span class="at">ATE Z -&gt; Y</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[Z=1] - Y[Z=0]&quot;</span>,</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>  <span class="st">`</span><span class="at">ATE X -&gt; Y</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>  <span class="st">`</span><span class="at">Direct (Z=1)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[Z = 1, X = X[Z=1]] - Y[Z = 0, X = X[Z=1]]&quot;</span>,</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>  <span class="st">`</span><span class="at">Direct (Z=0)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[Z = 1, X = X[Z=0]] - Y[Z = 0, X = X[Z=0]]&quot;</span>,</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>  <span class="st">`</span><span class="at">Indirect (Z=1)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[Z = 1, X = X[Z=1]] - Y[Z = 1, X = X[Z=0]]&quot;</span>,</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>  <span class="st">`</span><span class="at">Indirect (Z=0)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Y[Z = 0, X = X[Z=1]] - Y[Z = 0, X = X[Z=0]]&quot;</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>)</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">5000</span>)  <span class="sc">|&gt;</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a>    <span class="at">query =</span> queries,</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a>    <span class="at">cred =</span> <span class="dv">99</span>,</span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;posteriors&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Mediation model query" />
<div class="figcaption">Mediation model query</div>
</div>
<p>We estimate all quantities very well.</p>
</div>
<div id="mediation-model-without-sequential-ignorability" class="section level2">
<h2>Mediation model without sequential ignorability</h2>
<p>We now allow that there may be third features that cause both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. Thus we do not assume “sequential
ignorability.” This model might be justified by a random assignment of
<span class="math inline">\(Z\)</span>.</p>
<p>In this example the data is drawn the same way as before which means
that in the data generating model the potential outcomes for <span class="math inline">\(Y\)</span> are independent of those for <span class="math inline">\(X\)</span>, though the researcher does not know
this. The true (unknown) values of the queries are also the same as
before.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z -&gt; X -&gt; Y &lt;- Z; X &lt;-&gt; Y&quot;</span>)  <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="fu">c</span>(<span class="st">&quot;00&quot;</span>, <span class="st">&quot;10&quot;</span>), <span class="at">parameters =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">nodal_type =</span> <span class="st">&quot;0001&quot;</span>, <span class="at">parameters =</span> .<span class="dv">5</span>)</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>model <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">x_coord =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="at">y_coord =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Mediation model without sequential ignorability" />
<div class="figcaption">Mediation model without sequential
ignorability</div>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  model <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">iter =</span> <span class="dv">5000</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    <span class="at">query =</span> queries,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>    <span class="at">cred =</span> <span class="dv">99</span>,</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;posteriors&quot;</span>)</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Querying mediation model without sequential ignorability" />
<div class="figcaption">Querying mediation model without sequential
ignorability</div>
</div>
<p>We see we do not do nearly so well. To ensure stable estimates we ran
a large number of iterations. For the non-identified quantities our
credibility intervals are not tight (which is as it should be!) and in
one case the true value lies outside of them (which is not as it should
be). This highlights the extreme difficulty of this problem.
Nevertheless the gains relative to the priors are considerable.</p>
</div>
<div id="the-napkin-model" class="section level2">
<h2>The napkin model</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;W-&gt;Z-&gt;X-&gt;Y; W &lt;-&gt; X; W &lt;-&gt; Y&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">plot</span>(model)</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Napkin model" />
<div class="figcaption">Napkin model</div>
</div>
<p>The “napkin” model (see Pearl’s <em>Book of Why</em>) involves two
types of confounding. We will paramaterize a version in which (a) the
average causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> is negative, arising in cases when
<span class="math inline">\(W=0\)</span> (b) there is positive
confounding arising from the fact that <span class="math inline">\(X\)</span> is liable to be 1 regardless of <span class="math inline">\(Z\)</span> when <span class="math inline">\(W =
1\)</span> and ) <span class="math inline">\(Y\)</span> is liable to be
1 regardless of <span class="math inline">\(X\)</span> when <span class="math inline">\(W = 1\)</span>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;Y.10_W.0&quot;</span>, <span class="at">parameters =</span> .<span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;Y.11_W.1&quot;</span>, <span class="at">parameters =</span> .<span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;X.11_W.1&quot;</span>, <span class="at">parameters =</span> .<span class="dv">9</span>)</span></code></pre></div>
<p>Naive regression performs very badly here.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">make_data</span>(model, <span class="at">n =</span> <span class="dv">5000</span>, <span class="at">using =</span> <span class="st">&quot;parameters&quot;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a> estimatr<span class="sc">::</span><span class="fu">lm_robust</span>(Y <span class="sc">~</span> X, <span class="at">data =</span> data)  <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>   <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>   <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table>
<colgroup>
<col width="14%" />
<col width="11%" />
<col width="12%" />
<col width="12%" />
<col width="9%" />
<col width="11%" />
<col width="12%" />
<col width="6%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="right">df</th>
<th align="left">outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.75</td>
<td align="right">0.01</td>
<td align="right">66.39</td>
<td align="right">0</td>
<td align="right">0.73</td>
<td align="right">0.78</td>
<td align="right">4998</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">X</td>
<td align="right">-0.05</td>
<td align="right">0.01</td>
<td align="right">-3.63</td>
<td align="right">0</td>
<td align="right">-0.08</td>
<td align="right">-0.02</td>
<td align="right">4998</td>
<td align="left">Y</td>
</tr>
</tbody>
</table>
<p>In contrast, the updated causal model yields good estimates for the
ATE, though again we have somewhat more uncertainty for the probability
of causation.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>model <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="fu">update_model</span>(data, <span class="at">refresh =</span> <span class="dv">0</span>, <span class="at">iter =</span> <span class="dv">6000</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>      <span class="at">ATE =</span> <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>      <span class="at">PoC =</span> <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>),</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;posteriors&quot;</span>, <span class="st">&quot;priors&quot;</span>, <span class="st">&quot;parameters&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Napkin model queries" />
<div class="figcaption">Napkin model queries</div>
</div>
</div>
<div id="m-bias" class="section level2">
<h2><em>M</em>-bias</h2>
<p>In the below model, also studied in Pearl (<em>Causality</em>), the
effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> is identified without controlling for
<span class="math inline">\(Z\)</span>. Controlling for <span class="math inline">\(Z\)</span>, however, introduces a backdoor path
between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> which can introduce bias in naive
estimation.</p>
<p>Strikingly <span class="math inline">\(Z\)</span> might be prior to
<span class="math inline">\(X\)</span> but it can still introduce bias.
Here is the model</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">make_model</span>(<span class="st">&quot;Z &lt;- U1 -&gt; Y; Z &lt;- U2 -&gt; X; X -&gt; Y&quot;</span>)</span></code></pre></div>
<p>Here is a parameterization in which there is no true effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> yet a strong negative correlation
between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> once you control for <span class="math inline">\(Z\)</span>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;Y.0101&quot;</span>, <span class="at">parameters =</span> .<span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;Z.0001&quot;</span>, <span class="at">parameters =</span> .<span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">param_name =</span> <span class="st">&quot;X.01&quot;</span>, <span class="at">parameters =</span> .<span class="dv">8</span>)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="fu">plot</span>(model)</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="M bias model" />
<div class="figcaption">M bias model</div>
</div>
<p>With this model, naive regression results perform poorly when you
control for <span class="math inline">\(Z\)</span>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> model <span class="sc">|&gt;</span> <span class="fu">make_data</span>(<span class="at">n =</span> <span class="dv">1000</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>  <span class="st">`</span><span class="at">no controls</span><span class="st">`</span> <span class="ot">=</span> estimatr<span class="sc">::</span><span class="fu">lm_robust</span>(Y <span class="sc">~</span> X, <span class="at">data =</span> data),</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>  <span class="st">`</span><span class="at">with controls</span><span class="st">`</span> <span class="ot">=</span> estimatr<span class="sc">::</span><span class="fu">lm_robust</span>(Y <span class="sc">~</span> X <span class="sc">+</span> Z, <span class="at">data =</span> data)</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>   <span class="fu">lapply</span>(tidy) <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">&quot;Model&quot;</span>) <span class="sc">|&gt;</span>   <span class="fu">filter</span>(term <span class="sc">==</span><span class="st">&quot;X&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>, <span class="at">caption =</span> <span class="st">&quot;Estimation with and without controls&quot;</span>)</span></code></pre></div>
<table style="width:100%;">
<caption>Estimation with and without controls</caption>
<colgroup>
<col width="16%" />
<col width="5%" />
<col width="10%" />
<col width="11%" />
<col width="11%" />
<col width="9%" />
<col width="10%" />
<col width="11%" />
<col width="4%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Model</th>
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="right">df</th>
<th align="left">outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">no controls</td>
<td align="left">X</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">1.32</td>
<td align="right">0.19</td>
<td align="right">-0.02</td>
<td align="right">0.10</td>
<td align="right">998</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">with controls</td>
<td align="left">X</td>
<td align="right">-0.11</td>
<td align="right">0.03</td>
<td align="right">-3.48</td>
<td align="right">0.00</td>
<td align="right">-0.18</td>
<td align="right">-0.05</td>
<td align="right">997</td>
<td align="left">Y</td>
</tr>
</tbody>
</table>
<p>Taking account of <span class="math inline">\(Z\)</span> does not
harm (and could help) in the Bayesian setting.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="st">`</span><span class="at">Using Z</span><span class="st">`</span> <span class="ot">=</span> model <span class="sc">|&gt;</span> <span class="fu">update_model</span>(data, <span class="at">iter =</span> <span class="dv">5000</span>),</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="st">`</span><span class="at">Ignoring Z</span><span class="st">`</span> <span class="ot">=</span> model <span class="sc">|&gt;</span> <span class="fu">update_model</span>(data <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Z), <span class="at">iter =</span> <span class="dv">5000</span>))<span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  <span class="fu">query_model</span>(</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>      <span class="st">&quot;Y[X=1] - Y[X=0]&quot;</span>,</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>      <span class="st">&quot;Y[X=1] - Y[X=0] :|: X==1 &amp; Y==1&quot;</span>),</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>    <span class="at">using =</span> <span class="fu">c</span>(<span class="st">&quot;parameters&quot;</span>, <span class="st">&quot;priors&quot;</span>,  <span class="st">&quot;posteriors&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<div class="float">
<img src="data:image/png;base64,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" alt="Querying a model with M bias" />
<div class="figcaption">Querying a model with M bias</div>
</div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Forastiere, Laura, Alessandra Mattei, and Peng Ding. 2018. “Principal
ignorability in mediation analysis: through and beyond sequential
ignorability.” <em>Biometrika</em> 105.4: 979-986.</p>
<p>Pearl, Judea. 2012. <em>Causality</em>. Cambridge University
Press</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
